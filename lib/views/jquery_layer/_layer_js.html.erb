<%= render :partial => "jquery_layer/namespace" %>
(function($) {
  <%= layer.namespace %> = {
    <%- if layer.fetch_content -%>
    <%= layer.content_received_function_name(:short) %> : <%= render :partial => "jquery_layer/functions/content_received", :locals => {:layer => layer} %>,
    <%= layer.fetch_content_function_name(:short) %>    : <%= render :partial => "jquery_layer/functions/fetch_content", :locals => {:layer => layer} %>,
    <%- end -%>
    <%= layer.open_layer_function_name(:short) %>       : <%= render :partial => "jquery_layer/functions/open_layer", :locals => {:layer => layer} %>,
    <%= layer.close_layer_function_name(:short) %>      : <%= render :partial => "jquery_layer/functions/close_layer", :locals => {:layer => layer} %>,
    <%= layer.init_layer_function_name(:short) %>       : <%= render :partial => "jquery_layer/functions/init_layer", :locals => {:layer => layer} %>
  };

  $(document).ready(function() {
    <%= layer.init_layer_function_name %>();
    <%= additional_content %>
  });

})(jQuery);